import { O as OutputSeverity, L as LogDrain, C as ContextPlugin, S as ScoreVector, A as AggregateDimension, T as TransitionDataStore, a as StorageCommands, V as VisitorData, b as TransitionDataStoreOptions, D as DecayFunction, c as CriteriaEvaluator, d as StringMatch, e as VariantMatchCriteria, f as LogMessage } from './types-6909e78d.js';
export { X as AggregateDimensionInput, a1 as BehaviorTag, j as Context, i as ContextEvents, g as ContextOptions, aq as ContextState, ar as ContextStateUpdate, F as CriteriaEvaluatorParameters, E as CriteriaEvaluatorResult, ah as DecayOptions, m as DevToolsActions, q as DevToolsDataEvent, n as DevToolsEvent, o as DevToolsEvents, u as DevToolsForgetEvent, r as DevToolsHelloEvent, p as DevToolsLogEvent, t as DevToolsRawCommandsEvent, l as DevToolsState, k as DevToolsUiVersion, s as DevToolsUpdateEvent, _ as DimensionMatch, R as EnrichmentCategory, an as EnrichmentData, ao as EventData, G as GroupCriteriaEvaluator, ac as IdentifyCommand, z as LogMessageGroup, y as LogMessageSingle, v as LogMessages, B as ManifestInstance, I as ManifestV2, M as MessageCategory, x as MessageFunc, a7 as ModifyScoreCommand, a8 as ModifySessionScoreCommand, U as NumberMatch, P as PersonalizationEvent, J as PersonalizationManifest, $ as PersonalizeOptions, a3 as PersonalizedResult, a2 as PersonalizedVariant, al as Quirks, af as SERVER_STATE_ID, ae as ServerToClientTransitionState, a9 as SetConsentCommand, ad as SetControlGroupCommand, aa as SetQuirkCommand, ab as SetTestCommand, w as Severity, K as Signal, Q as SignalCriteria, N as SignalCriteriaGroup, H as SignalData, a6 as StorageCommand, W as TestDefinition, h as TestEvent, Y as TestOptions, a5 as TestResult, a4 as TestVariant, am as Tests, ag as TransitionDataStoreEvents, ak as VisitorDataStore, aj as VisitorDataStoreEvents, ai as VisitorDataStoreOptions, ap as emptyVisitorData, a0 as personalizeVariations, Z as testVariations } from './types-6909e78d.js';
import Cookies from 'js-cookie';
import 'mitt';

/**
 * Creates a new log drain that will log to the console.
 * The log drain will only log event IDs, but is much smaller than the
 * debug log drain.
 *
 * NOTE: you probably want enableConsoleLogDrain() instead of this function.
 */
declare function createConsoleLogDrain(level: OutputSeverity): LogDrain;
/**
 * Enables logging Context events to the browser console.
 * Lightweight events with only the event ID are emitted.
 */
declare function enableConsoleLogDrain(level: OutputSeverity): ContextPlugin;

/** Computes aggregated scores based on other dimensions */
declare function computeAggregateDimensions(primitiveScores: ScoreVector, aggregates: Record<string, AggregateDimension>): ScoreVector;

type CookieTransitionDataStoreOptions = {
    /**
     * The value of the score cookie during server-side rendering.
     * Should be parsed from the incoming request.
     * IMPORTANT: If not passed, the transition store will not have any effect during SSR.
     */
    serverCookieValue?: string;
    /**
     * The name of the cookie to store client-to-server score information in.
     * Defaults to UNIFORM_DEFAULT_COOKIE_NAME if not set.
     */
    cookieName?: string;
    /**
     * Attributes to set on the transfer cookie.
     * Persistence is not necessary, because the data is only used for temporary transition;
     * local storage is the master copy. Defaults to SameSite=Lax.
     */
    cookieAttributes?: Cookies.CookieAttributes;
};
declare const UNIFORM_DEFAULT_COOKIE_NAME = "ufvd";
/**
 * Handles client-to-server score handoff using an encoded cookie with the visitor score vector.
 * NOTE: forget me is not supported when on the server side.
 */
declare class CookieTransitionDataStore extends TransitionDataStore {
    #private;
    constructor({ serverCookieValue, cookieName, cookieAttributes, }: CookieTransitionDataStoreOptions);
    handleDelete(): Promise<void>;
    handleUpdateData(_: StorageCommands[], computedValue: VisitorData): Promise<void>;
}

type EdgeTransitionDataStoreOptions = TransitionDataStoreOptions & {
    serverCookieValue?: string;
    visitorIdCookieName?: string;
};
declare class EdgeTransitionDataStore extends TransitionDataStore {
    #private;
    constructor({ serverCookieValue, visitorIdCookieName, ...base }: EdgeTransitionDataStoreOptions);
    handleDelete(fromAllDevices?: boolean): Promise<void>;
    handleUpdateData(commands: StorageCommands[]): Promise<void>;
}

type LinearDecayOptions = {
    /**
     * The length of time before decay starts, in msec.
     * Default: 1 day (8.64e7)
     */
    gracePeriod?: number;
    /**
     * How much the score decays per day (decimal, 0-1).
     * Default: decay over 30 days (1/30)
     *
     * Note: the grace period is not included in this rate,
     * so if the grace period is 1 day and the decay rate is 1/30,
     * it would take 31 days to hit max decay.
     */
    decayRate?: number;
    /**
     * The maximum amount of decay that can occur at once (decimal, 0-1)
     * Default: 95% (0.95)
     */
    decayCap?: number;
};
/**
 * Creates a function that applies linear decay to scores over time.
 */
declare function createLinearDecay(options?: LinearDecayOptions): DecayFunction;

declare function getEnrichmentVectorKey(category: string, value: string): string;

declare const cookieEvaluator: CriteriaEvaluator;

declare const currentPageEvaluator: CriteriaEvaluator;

declare const eventEvaluator: CriteriaEvaluator;

declare const pageViewCountDimension: string;
declare const pageViewCountEvaluator: CriteriaEvaluator;

declare const queryStringEvaluator: CriteriaEvaluator;

declare const quirkEvaluator: CriteriaEvaluator;

/** Tests if a StringMatch matches a string value */
declare function isStringMatch(lhs: string | number | null | undefined, match: StringMatch): boolean;
declare function explainStringMatch(lhs: string | number | null | undefined, match: StringMatch): string;
declare function explainStringMatchCriteria(match: StringMatch): string;

type ConsoleDebugLogDrainOptions = {
    enableOnServer?: boolean;
};
/**
 * Creates a new log drain that will log full debug messages to the console.
 * The debug log drain adds significant bundle size, but is useful for debugging.
 *
 * NOTE: you probably want enableDebugConsoleLogDrain() instead of this function.
 */
declare function createDebugConsoleLogDrain(level: OutputSeverity, options?: ConsoleDebugLogDrainOptions): LogDrain;
/**
 * Enables logging Context events to the browser console.
 * Lightweight events with only the event ID are emitted.
 */
declare function enableDebugConsoleLogDrain(level: OutputSeverity, options?: ConsoleDebugLogDrainOptions): ContextPlugin;

declare function evaluateVariantMatch(variantId: string, match: VariantMatchCriteria | undefined | null, vec: ScoreVector, onLogMessage?: (message: LogMessage) => void): boolean;

/**
 * Enables a Context instance to feed data to the Uniform Context DevTools.
 * DevTools can be hosted either as a Chromium extension, or as a standalone
 * React app within a page and receive data once this plugin has been activated.
 * @returns Function that when invoked detaches the event listeners and disables DevTools.
 */
declare function enableContextDevTools(): ContextPlugin;

declare enum ScriptType {
    ListStart = "nesi-list-start",
    ListEnd = "nesi-list-end",
    ListItem = "nesi-list-item-html",
    ListItemSettings = "nesi-list-item-settings",
    TestStart = "nesi-test-start",
    TestEnd = "nesi-test-end",
    Unknown = "unknown"
}
type EdgePersonalizeComponentOptions = {
    name: string;
    count?: number;
};
type EdgeTestComponentOptions = {
    name: string;
};
declare const EdgeNodeTagName = "nesitag";

type QuickConnectConfig = {
    apiKey: string;
    projectId: string;
    apiHost?: string;
};
declare function serializeQuickConnect(config: QuickConnectConfig): string;
declare function parseQuickConnect(serialized: string): Required<QuickConnectConfig>;

export { AggregateDimension, ConsoleDebugLogDrainOptions, ContextPlugin, CookieTransitionDataStore, CookieTransitionDataStoreOptions, CriteriaEvaluator, DecayFunction, EdgeNodeTagName, EdgePersonalizeComponentOptions, EdgeTestComponentOptions, EdgeTransitionDataStore, EdgeTransitionDataStoreOptions, LinearDecayOptions, LogDrain, LogMessage, OutputSeverity, QuickConnectConfig, ScoreVector, ScriptType, StorageCommands, StringMatch, TransitionDataStore, TransitionDataStoreOptions, UNIFORM_DEFAULT_COOKIE_NAME, VariantMatchCriteria, VisitorData, computeAggregateDimensions, cookieEvaluator, createConsoleLogDrain, createDebugConsoleLogDrain, createLinearDecay, currentPageEvaluator, enableConsoleLogDrain, enableContextDevTools, enableDebugConsoleLogDrain, evaluateVariantMatch, eventEvaluator, explainStringMatch, explainStringMatchCriteria, getEnrichmentVectorKey, isStringMatch, pageViewCountDimension, pageViewCountEvaluator, parseQuickConnect, queryStringEvaluator, quirkEvaluator, serializeQuickConnect };
